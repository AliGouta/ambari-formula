{% from 'hadoop/map.jinja' import hdpconfig with context %}

{
  "blueprint": "{{ hdpconfig.blueprint.clustername }}",
  "default_password": "admin",
  "host_groups": [
    {% for hostgroup in hdpconfig['hostgroups'].iteritems() %}{
      "hosts": [
      {% for fqdn in hostgroup['fqdns'] %}{
        "fqdn": "{{ fqdn }}"
      }{% if not loop.last %},
      {% endif %}{% endfor %}
      ],
      "name": "{{ hostgroup.name }}"
    }{% if not loop.last %},
    {% endif %}{% endfor %}
  ]
}